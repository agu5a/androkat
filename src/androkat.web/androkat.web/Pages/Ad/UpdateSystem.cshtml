@page
@using androkat.web.Pages.Ad
@model androkat.web.Pages.Ad.UpdateSystemModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@section meta_extra {
    <script type="text/javascript">
        $(document).ready(function () {

        @{
            if (Model.ShowToast)
            {
                <text>
                $("#myToast").toast("show");
                </text>
            }
        }

        // Add event listener for dropdown change to automatically submit the form
        $("#Nid").change(function() {
            $(this).closest("form").submit();
        });

        });
    </script>
}

<div class="container-fluid">
    <div class="py-5 text-center">
        <h3>System data update</h3>
    </div>
    <form method="post" asp-page-handler="Search">
        <div class="row">
            <div class="m-6 me-2" style="width: 400px;">
                @Html.DropDownListFor(model => model.Nid, Model.AllRecordResult, "--Key--", new { @class = "form-control form-control-sm", style = "width: 400px;" })
            </div>
            <!-- Removing the button as it's no longer needed -->
        </div>
        <div class="row">
            <div class="col-md-12 order-md-1">
                <div class="mb-3">
                </div>
                <div class="mb-3">
                </div>
                <div class="mb-3">
                    <div><span class="p-1 mb-3 bg-primary text-white">Value</span></div>
                    <div style="margin: 10px 0 0 0;">
                        <textarea id="value" name="value" class="form-control" rows="8" cols="50">@Model.Value</textarea>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3" style="width: 107px;">
                        <button type="submit" class="btn btn-lg btn-primary" asp-page-handler="Save">
                            mehet
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
<div id="myToast" class="toast position-fixed top-0 start-0 m-5 p-3" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
        <div class="toast-body">
            @Html.Raw(Model.Error)
        </div>
        <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
</div>